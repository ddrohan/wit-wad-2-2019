<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.10/semantic.min.css"
          type="text/css">
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/railscasts.min.css"
          rel="stylesheet"/>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/jquery.address/1.6/jquery.address.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.10/semantic.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/java.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/kotlin.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <style>
      

body {
  font-family: "Open Sans", "Helvetica", "Helvetica Neue",  "Arial", sans-serif;
  font-size:90%;
  color: black;
}

p {
  margin: 0.5em;
}

pre code {
  font-family: "Monaco";
  font-size: 100%;
}

img {
  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
  margin:10px;
}

h1, h2, h3 {
  border-bottom:thin solid black;
  margin-bottom: 0.5em;
  margin-top: 1em;
}

h1 {
  font-style:italic;
  font-size:130%;
}

h2 {
  font-size:110%;
}

h3 {
  font-size:100%;
}



      

html, body {
  height: 100%;
  margin: 0;
}
.wrapper {
  height: 100%;
  display: flex;
  flex-direction: column;
}
.footer {
  background: white;
  text-align: right;
}
.content {
  flex: 1;
  overflow: auto;
}



    </style>
  </head>

  
  

  <div class="ui fixed top pointing inverted stackable menu labmenu">
    <header class="header item">
      <i id="toc" class="sitemap icon"></i>
      
        <a href="../../index.html"> Node, MongoDB & Mongoose   </a>
      
    </header>
    <div class="right tab-menu menu">
      
        <a class="item" data-tab="Lab-03">
          Lab-03
        </a>
      
        <a class="item" data-tab="01">
          01
        </a>
      
        <a class="item" data-tab="02">
          02
        </a>
      
        <a class="item" data-tab="03">
          03
        </a>
      
        <a class="item" data-tab="04">
          04
        </a>
      
        <a class="item" data-tab="05">
          05
        </a>
      
        <a class="item" data-tab="06">
          06
        </a>
      
        <a class="item" data-tab="07">
          07
        </a>
      
        <a class="item" data-tab="Solution">
          Solution
        </a>
      
    </div>
  </div>


  

  <div class="ui pushable">
    <div class="ui inverted labeled icon left inline vertical sidebar menu">
      <br><br>
      
        
          
            <a class="item"
               href="http://ddrohan.github.io/wit-wad-2-2019//topic01-intro/unit-1/book-dev-setup/index.html">Setup </a>
          
        
      
        
          
            <a class="item"
               href="http://ddrohan.github.io/wit-wad-2-2019//topic01-intro/unit-1/book-js-lab01/index.html">JS.Lab-01 </a>
          
        
      
        
          
            <a class="item"
               href="http://ddrohan.github.io/wit-wad-2-2019//topic01-intro/unit-1/book-js-lab02/index.html">JS.Lab-02 </a>
          
        
      
        
          
            <a class="item"
               href="http://ddrohan.github.io/wit-wad-2-2019//topic02-wad/unit-1/book-web-lab01/index.html">Lab-01 </a>
          
        
      
        
          
            <a class="item"
               href="http://ddrohan.github.io/wit-wad-2-2019//topic02-wad/unit-1/book-web-lab02/index.html">Lab-02 </a>
          
        
      
        
          
            <a class="item"
               href="http://ddrohan.github.io/wit-wad-2-2019//topic02-wad/unit-2/book-web-lab03/index.html">Lab-03 </a>
          
        
      
        
          
            <a class="item"
               href="http://ddrohan.github.io/wit-wad-2-2019//topic02-wad/unit-2/book-web-wheroku/index.html">Deploy-to-heroku </a>
          
        
      
        
          
            <a class="item"
               href="http://ddrohan.github.io/wit-wad-2-2019//topic02-wad/unit-3/book-webvue-lab01/index.html">Lab-Vue-01 </a>
          
        
      
        
          
            <a class="item"
               href="http://ddrohan.github.io/wit-wad-2-2019//topic02-wad/unit-4/book-webvue-lab02/index.html">Lab-Vue-02 </a>
          
        
      
        
          
            <a class="item"
               href="http://ddrohan.github.io/wit-wad-2-2019//topic02-wad/unit-4/book-webvue-lab03/index.html">Lab-Vue-03 </a>
          
        
      
        
          
            <a class="item"
               href="http://ddrohan.github.io/wit-wad-2-2019//topic02-wad/unit-5/book-webvue-wfirebase/index.html">Deploy-to-Firebase </a>
          
        
      
    </div>
    <div class="pusher" tabindex="-1">
      <div class="ui basic segment">
        <br>
        
          <div class="ui tab segment lab" data-tab="Lab-03">
            <h1>Lab 3 - Donation 3.0 (Mongo, Express &amp; Node App)</h1>
<p>In this lab we will be introducing some proper persistence, through a <strong>MongoDB</strong> backend, initially running locally, and then eventually deploying to <a href="http://www.mlab.com">www.mlab.com</a> or if you need a new Atlas account <a href="http://www.mongodb.com">www.mongodb.com</a> so that we can have remote mongo support.</p>
<p>Here&#39;s a link to some of the commands you&#39;ll be using throughout the lab [QuickLinks] (<a href="http://docs.mongodb.org/master/tutorial/getting-started-with-the-mongo-shell/">http://docs.mongodb.org/master/tutorial/getting-started-with-the-mongo-shell/</a>) but most of what we do in this lab we&#39;ll have covered in the lectures.</p>

          </div>
        
          <div class="ui tab segment lab" data-tab="01">
            <h1>Objectives</h1>
<p>In this Lab, you will be required to build the next version of our Donation Case Study Web App, called <strong>DonationWeb 3.0</strong>.  We will build on the previous lab, so you can either use your own version of <strong>DonationWeb 2.0</strong> or download the starter code <strong><a href="archives/donationweb-2.0.zip">here</a></strong> (just make sure you rename the project folder). In this version we will be implementing a <strong><em>MongoDB</em></strong> backend (and reusing our previous solution).  </p>
<p>On completion of this lab you&#39;ll be able to</p>
<ul>
<li>create a <strong>NodeJS</strong> web app using <strong>express</strong></li>
<li>run this app as a <strong>NodeJS Server</strong> and process client requests</li>
<li>be able to use <strong>npm</strong> to install dependency modules</li>
</ul>
<p>AND</p>
<ul>
<li>store data in a <strong>MongoDB</strong> database</li>
</ul>

          </div>
        
          <div class="ui tab segment lab" data-tab="02">
            <h1>Step 2 - Setup</h1>
<p>First thing you should do is download the starter code (or the solution to the previous lab) <strong><a href="archives/donationweb-2.0.zip">here</a></strong> and then extract it to your single parent folder for all your web app projects you created for previous labs.</p>
<p>Rename the extracted folder, (or copy your own version) to <strong>donationweb-3.0</strong></p>
<p>Open your <strong>donationweb-3.0</strong> web app (in WebStorm) and then change your &#39;title&#39; like so</p>
<p><img src="img/lab03s01.png" alt=""></p>
<p>and launch it.</p>
<p>You may not get any errors, but you should probably reconfigure your project (as it&#39;s a copy) and confirm the <strong>node modules</strong> path as follows:</p>
<p>Open your preferences and navigate to the <strong>Library</strong> settings and update your <strong>node_modules</strong> path to point to the current project if necessary.</p>
<p><img src="img/lab03s02.png" alt=""></p>
<p>Launch again, if everything goes to plan you should be able to visit <a href="http://localhost:3000"><a href="http://localhost:3000">http://localhost:3000</a></a> and you should see something like the following:</p>
<p><img src="img/lab03s03.png" alt=""></p>
<p>The next thing to do is to add the <strong>mongodb</strong> and <strong>mongoose</strong> module dependencies to our project, which WebStorm can help us with (as we did in Lab 01)</p>
<p><img src="img/lab03s04.png" alt=""></p>
<p>If you want to go old school, you can manually install like so</p>
<pre><code>npm install mongoose</code></pre>
<p>and</p>
<pre><code>npm install mongodb</code></pre>
<p>Confirm your <strong>node_modules</strong> now includes the following:</p>
<p><img src="img/lab03s05.png" alt=""></p>
<p>The last step in our &#39;Setup&#39; is to kick off our localhost mongodb server and insert a few &#39;Donations&#39; so we can test our refactored &#39;findAll&#39; function (next step).</p>
<p>Open up a terminal window and launch the mongodb server</p>
<p><img src="img/lab03s06.png" alt=""></p>
<p><img src="img/lab03s07.png" alt=""></p>
<p>Open another, separate terminal window and launch the client</p>
<p><img src="img/lab03s08.png" alt=""></p>
<p><img src="img/lab03s09.png" alt=""></p>
<p><img src="img/lab03s10.png" alt=""></p>
<p>In the client window,</p>
<ul>
<li>create/switch to the <strong>&#39;donationsdb&#39;</strong> database</li>
<li>insert a few records (similar to the screenshots) and make sure you name your collection <strong>donations</strong> and <strong>NOT</strong> <strong>donationsdb</strong> as in the Screenshots, so the command you should be inserting with is (for example)</li>
</ul>
<pre><code>db.donations.insert(&quot;paymenttype&quot; : &quot;PayPal&quot;, &quot;amount&quot; : 1500, &quot;upvotes&quot; : 0 })</code></pre>
<p><strong>So what we have here is a database called donationsdb and a collection within it called donations </strong></p>
<p><img src="img/lab03s11.png" alt=""></p>
<p>To confirm the records were inserted correctly execute a <strong>find()</strong></p>
<pre><code>db.donations.find()</code></pre>
<p><img src="img/lab03s12.png" alt=""></p>
<p><img src="img/lab03s13.png" alt=""></p>
<p>We now have a few records or &#39;documents&#39; we can access via our Node Web Server (next step).</p>
<p>If you have no &#39;option&#39; to run your app, you may have to reconfigure the &#39;Run/Debug&#39; settings so select &#39;Edit Configurations&#39; and you&#39;ll get this screen</p>
<p><img src="img/lab03s14.png" alt=""></p>
<p>then (as instructed) click the + button to add a new configuration - select &#39;Node&#39; and your are presented with this screen</p>
<p><img src="img/lab03s15.png" alt=""></p>
<p>Populate your settings similar to what&#39;s below</p>
<p><img src="img/lab03s17.png" alt=""></p>
<p><img src="img/lab03s16.png" alt=""></p>
<p>And run your app to get</p>
<p><img src="img/lab03s18.png" alt=""></p>

          </div>
        
          <div class="ui tab segment lab" data-tab="03">
            <h1>Step 3 - Creating our Database Schema</h1>
<p>Our first step in making a persistent data store is to configure our data models. To do this, we are going to be adding a schema layer on top of <strong>MongoDB</strong> using a nice library called <strong><em>Mongoose</em></strong>. Before we begin, let&#39;s make sure our <strong>MongoDB</strong> server is running.</p>
<p>If Mongo isn&#39;t running on your machine, enter this into your terminal:</p>
<pre><code>mongod</code></pre>
<p>and to run a mongo client</p>
<pre><code>mongo</code></pre>
<p>We connect to our local MongoDB instance by adding the following code into our donations.js <strong>routes</strong> file:</p>
<pre><code class="lang-javascript">let mongoose = require(&#39;mongoose&#39;);

...

mongoose.connect(&#39;mongodb://localhost:27017/donationsdb&#39;);

let db = mongoose.connection;

db.on(&#39;error&#39;, function (err) {
    console.log(&#39;Unable to Connect to [ &#39; + db.name + &#39; ]&#39;, err);
});

db.once(&#39;open&#39;, function () {
    console.log(&#39;Successfully Connected to [ &#39; + db.name + &#39; ]&#39;);
});</code></pre>
<p>(It&#39;s probably a good idea to remove our javascript list altogether at this point as we don&#39;t need it.)</p>
<p>This will open a connection with the <strong><em>donationsdb</em></strong> database running on our Mongo server. Now we can modify our existing model and introduce a database schema.</p>
<hr>
<h2>Creating a Schema with Mongoose</h2>
<p>In our <strong>models/</strong> directory edit <strong>donations.js</strong> and replace the current &#39;model&#39; with the following code:</p>
<pre><code class="lang-javascript">let mongoose = require(&#39;mongoose&#39;);

let DonationSchema = new mongoose.Schema({
    paymenttype: String,
    amount: Number,
    upvotes: {type: Number, default: 0}
    },
    { collection: &#39;donations&#39; });

module.exports = mongoose.model(&#39;Donation&#39;, DonationSchema);</code></pre>
<p>Here we&#39;ve defined a model called <strong><em>Donation</em></strong> with several attributes corresponding to the type of data we&#39;d like to store. We&#39;ve declared our upvotes field to be initialized to 0. We also explicitly name the collection within which we are storing our donations.</p>
<p>Next we register that model with the global mongoose object we imported using require() so that it can be used to interact with the database anywhere else mongoose is imported.</p>
<p><strong>It is strongly recommended to run your web server at this point, to ensure everything is configured correctly and before we go ahead an modify our routes to interact with the database.</strong></p>
<p>So as before, go ahead and fire up the server - but make sure your mongodb is running first, and you get the <strong>&#39;Successfully connected ... &#39;</strong> message at the console.</p>
<p><img src="img/lab03s19.png" alt=""></p>

          </div>
        
          <div class="ui tab segment lab" data-tab="04">
            <h1>Step 4 - Modifying our &#39;Routes&#39;, Part 1 ( &#39;findAll&#39; &amp; &#39;findOne&#39; )</h1>
<p>Our current setup involves pulling data from a javascript object array and storing objects back to that array. We now want to be able to store and retrieve our <strong><em>&#39;donations&#39;</em></strong> from our mongodb database.</p>
<p>The first thing we&#39;ll do is modify our &#39;findAll&#39; route.</p>
<hr>
<h2>Modifying Our First Route - &#39;findAll&#39;</h2>
<p>Edit your <strong>routes/donations.js</strong> file and navigate to your existing &#39;findAll&#39; function.</p>
<p>Now, replace it with the following :</p>
<pre><code class="lang-javascript">router.findAll = (req, res) =&gt; {
    // Return a JSON representation of our list
    res.setHeader(&#39;Content-Type&#39;, &#39;application/json&#39;);

    Donation.find(function(err, donations) {
        if (err)
            res.send(err);

        res.send(JSON.stringify(donations,null,5));
    });
}</code></pre>
<p>Notice how we use the Mongoose &#39;find()&#39; function to retrieve all the objects from the &#39;Model&#39;.</p>
<p>Make sure you have the proper <strong>requires</strong> statement in your routes file</p>
<pre><code class="lang-javascript">var Donation = require(&#39;../models/donations&#39;);</code></pre>
<p>to include the mongoose schema.</p>
<hr>
<h3>Testing Our &#39;findAll&#39; Route</h3>
<h3>The Request</h3>
<p>GETing all the donations in our mongodb database</p>
<pre><code class="lang-js">/donations</code></pre>
<p><img src="img/lab03s20.png" alt=""></p>
<h3>The Response</h3>
<p><img src="img/lab03s21.png" alt=""></p>
<hr>
<h2>Modifying Our Second Route - &#39;findOne&#39;</h2>
<p>Our first route returned all the donations to a client, but what if the client only want&#39;s to get at a single donation from the database - that&#39;s what our next route &#39;findOne&#39; does, so we need to refactor our current implementation to make use of mongoose.</p>
<pre><code class="lang-javascript">router.findOne = (req, res) =&gt; {

    res.setHeader(&#39;Content-Type&#39;, &#39;application/json&#39;);

    Donation.find({ &quot;_id&quot; : req.params.id },function(err, donation) {
        if (err)
            // return a suitable error message
        else
            // return the donation
    });
}</code></pre>
<p>Notice the use of the <strong>req</strong> parameter to pass in the <strong><em>id</em></strong> of the donation we require.</p>
<hr>
<h3>Testing Our &#39;findOne&#39; Route</h3>
<h3>The Request</h3>
<p>GETing donation with id &#39;5b1d26cc572f1998d830a691&#39;</p>
<pre><code class="lang-html">/donations/5b1d26cc572f1998d830a691</code></pre>
<p><img src="img/lab03s22.png" alt=""></p>
<h3>The Response</h3>
<p><img src="img/lab03s23.png" alt=""></p>
<p>requesting donation with id &#39;5b1d26cc572f1998d830a<strong>XYZ</strong>&#39; (doesn&#39;t exist)</p>
<pre><code class="lang-html">/donations/5b1d26cc572f1998d830aXYZ</code></pre>
<p><img src="img/lab03s24.png" alt=""></p>
<hr>

          </div>
        
          <div class="ui tab segment lab" data-tab="05">
            <h1>Step 5 - Modifying our &#39;Routes&#39;, Part 2 ( &#39;addDonation&#39; &amp; &#39;incrementVotes&#39; )</h1>
<h2>Modifying Our Third Route - &#39;Add a Donation&#39;</h2>
<p>Again, edit your <strong>routes/donations.js</strong> file and navigate to your existing &#39;addDonation&#39; function.</p>
<p>And replace it with the following :</p>
<pre><code class="lang-javascript">router.addDonation = (req, res) =&gt; {

    res.setHeader(&#39;Content-Type&#39;, &#39;application/json&#39;);

    var donation = new Donation();

    donation.paymenttype = // the requested value
    donation.amount = // the requested value

    donation.save(function(err) {
        if (err)
            // return a suitable error message
        else
            // return a suitable success message
    });
}</code></pre>
<p>There&#39;s a bit more going on here, so make sure you understand the general jist of how this works. (But I&#39;ll explain in the labs anyway)</p>
<p>You may need to restart your server but if everything goes to plan, you should now be able to store and retrieve &#39;donations&#39; from your mongodb database.</p>
<p>Let&#39;s test our <strong>addDonation</strong> using WebStorms REST Client (like before)</p>
<hr>
<h3>Testing Our &#39;Add&#39; Route</h3>
<h3>The Request</h3>
<p>We need to fill in the <strong>Request Body</strong> for our POST</p>
<p><img src="img/lab03s25.png" alt=""></p>
<h3>The Response</h3>
<p><img src="img/lab03s26.png" alt=""></p>
<p>GET all the donations again, just to confirm</p>
<h2>Modifying Our Fourth Route - &#39;Increment Votes&#39;</h2>
<p>Again, edit your <strong>routes/donations.js</strong> file and navigate to your existing &#39;incrementVotes&#39; function.</p>
<p>And replace it with the following :</p>
<pre><code class="lang-javascript">router.incrementUpvotes = (req, res) =&gt; {

    Donation.findById(/*id from request parameters*/, function(err,donation) {
        if (err)
            // return a suitable error message
        else {
            donation.upvotes += 1;
            donation.save(function (err) {
                if (err)
                    // return a suitable error message
                else
                // return a suitable success message
            });
        }
    });
}</code></pre>
<p>Like last time, there&#39;s a bit more going on here, so make sure you understand the general jist of how this works. (But I&#39;ll explain in the labs if necessary?)</p>
<p>You may need to restart your server but if everything goes to plan, you might now be able to &#39;upvote&#39; donations from your mongodb database.</p>
<hr>
<h3>Testing Our &#39;UpVote&#39; Route</h3>
<p>PUTing (or updating) donation with id &#39;5b1d26cc572f1998d830a691&#39;</p>
<pre><code class="lang-html">/donations/5b1d26cc572f1998d830a691/vote</code></pre>
<h3>The Request</h3>
<p><img src="img/lab03s27.png" alt=""></p>
<h3>The Response</h3>
<p><img src="img/lab03s28.png" alt=""></p>
<p>GET all donations again to confirm the update</p>

          </div>
        
          <div class="ui tab segment lab" data-tab="06">
            <h1>Step 6 - Modifying our &#39;Routes&#39;, Part 3 ( &#39;deleteDonation&#39; &amp; &#39;findTotalVotes&#39;)</h1>
<h2>Modifying Our Final Routes - &#39;Delete a Donation&#39;</h2>
<p>Edit your <strong>routes/donations.js</strong> file and navigate to your existing &#39;deleteDonation&#39; function.</p>
<p>Now, replace it with the following :</p>
<pre><code class="lang-javascript">router.deleteDonation = (req, res) =&gt; {

    Donation.findByIdAndRemove(/*id from request parameters*/, function(err) {
        if (err)
            // return a suitable error message
        else
            // return a suitable success message
    });
}</code></pre>
<p>Notice how we use the Mongoose <strong>&#39;findByIdAndRemove&#39;</strong> function to retrieve and delete the object from the &#39;Model&#39;.</p>
<h3>Testing Our &#39;Delete&#39; Route</h3>
<h3>The Request</h3>
<p><img src="img/lab03s29.png" alt=""></p>
<h3>The Response</h3>
<p><img src="img/lab03s30.png" alt=""></p>
<p><img src="img/lab03s31.png" alt=""></p>
<p>GET all donations again to confirm</p>
<h2>Modifying Our Final Routes - &#39;Find Total Votes&#39;</h2>
<p>Edit your <strong>routes/donations.js</strong> file and navigate to your existing &#39;findTotalVotes&#39; function.</p>
<p>Now, replace it with the following :</p>
<pre><code class="lang-js">router.findTotalVotes = (req, res) =&gt; {

    Donation.find(function(err, donations) {
        if (err)
            // return a suitable error message
        else
            // return the total number of votes
    });
}</code></pre>
<h3>Testing Our &#39;findTotalVotes&#39; Route</h3>
<h3>The Request</h3>
<p>GET all donations first to confirm</p>
<p><img src="img/lab03s32.png" alt=""></p>
<h3>The Response</h3>
<p><img src="img/lab03s33.png" alt=""></p>

          </div>
        
          <div class="ui tab segment lab" data-tab="07">
            <h1>Step 7 - Remote Cloud Support</h1>
<p>If you haven&#39;t done so already set up your mongodb remote database on either mlabs or mongodb. You can follow a quick guide to my own setup here <a href="https://ddrohan.github.io/wit-wad-2-2019/topic01-intro/unit-1/book-dev-setup/index.html">mlab setup</a> for both an mlab account and a mongodb atlas account.</p>
<p>Now, create a new mongod connection in your <strong>routes/donations</strong> file like so</p>
<p><strong>NOTE: The Database is named &#39;donationsdb&#39;, the mongoose Schema will allow us to find the relevant Collection</strong></p>
<h2>mlab connection string</h2>
<pre><code class="lang-javascript">var mongodbUri =&#39;mongodb://&lt;user&gt;:&lt;password&gt;@ds255260.mlab.com:55260/donationsdb&#39;;</code></pre>
<h2>mongodb atlas connection string</h2>
<pre><code class="lang-javascript">var mongodbUri = &#39;mongodb+srv://&lt;user&gt;:&lt;password&gt;@wit-donation-cluster-upbus.mongodb.net/donationsdb?retryWrites=true&amp;w=majority&#39;;</code></pre>
<p>and connect using this connection instead of your localhost Connection</p>
<pre><code class="lang-javascript">mongoose.connect(mongodbUri);</code></pre>
<p><strong>NOTE - this is my own connection string, so you will need to grab your own connection from your mlab account and use the username/password you set up to access your database</strong></p>
<p>You should run your app to confirm you can connect to your remote mongodb database before proceeding.</p>
<p>Once you&#39;re connecting ok, you should then insert a few records and retrieve them, just to confirm everything is working ok and then verify this against your mlab account</p>
<h2>Testing Our Connection</h2>
<p><img src="img/lab03s40.png" alt=""></p>
<p><img src="img/lab03s41.png" alt=""></p>
<p><img src="img/lab03s42.png" alt=""></p>
<p><img src="img/16.png" alt=""></p>

          </div>
        
          <div class="ui tab segment lab" data-tab="Solution">
            <h1>Solution - Lab 3</h1>
<p>You can find the mlab solution to this lab <strong><a href="archives/donationweb-3.0.zip">here</a></strong>.</p>

          </div>
        
      </div>
    </div>
  </div>


  <br>
  <script>
    $(document).on('keydown', function(e) {
  e = e || window.event;
  var nextTab;
  switch (e.which || e.keyCode) {
    case 37: // left
      nextTab = $('.tab-menu a[data-tab].active').prev('a[data-tab]');
      if (!nextTab.length) nextTab = $('.tab-menu a[data-tab]').last();
      nextTab.click();
      $('.pusher').focus();
      break;

    case 39: // right
      nextTab = $('.tab-menu a[data-tab].active').next('a[data-tab]');
      if (!nextTab.length) nextTab = $('.tab-menu a[data-tab]').first();
      nextTab.click();
      $('.pusher').focus();
      break;
  }
});

    $(document).ready(function() {
  $('img').addClass('ui image');

  $('.ui.embed').embed();

  const $images = $('.lab img');
  jQuery.each($images, function(i) {
    if ($images[i].alt.length > 0) {
      const divImg = $(document.createElement('div')).addClass(
        'ui basic segment',
      );
      $($images[i]).wrap(divImg);
      const divLabel = $(document.createElement('div')).addClass(
        'ui blue ribbon label',
      );
      divLabel.append($images[i].alt);
      $(divLabel).insertBefore($images[i]);
    }
  });

  $('.ui.menu .item').tab({
    history: true,
    historyType: 'hash',
  });

  $('.popup').popup();

  $('.ui.sidebar')
    .sidebar({ context: $('.pushable') })
    .sidebar('setting', 'transition', 'slide out')
    .sidebar('attach events', '#toc');
});

  </script>



  <div class="ui bottom fixed borderless right menu">
    <div class="ui right small menu">
      <div class="ui tiny basic message segment">
         Powered by <a href="https://github.com/edeleastar/tutors-ts">tutors-ts.</a> 
      </div>
    </div>
  </div>

  </body>

</html>